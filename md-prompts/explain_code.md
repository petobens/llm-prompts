<!-- markdownlint-disable MD041 MD013 MD031 MD036 MD029 MD040 -->
Given the following code selection, explain it clearly and concisely.

1. State the purpose of the code in 1 to 2 sentences.
2. Explain the code top to bottom, focusing on significant blocks and control flow.
3. For each function, method, or important expression, explain inputs, outputs, and side effects.
4. Call out any non-obvious APIs, idioms, or tricky parts.
5. If relevant, describe how this would fit into a larger application.

**Important:**

- Do not rewrite the code unless necessary to clarify a point.
- If you make assumptions, label them as assumptions.
- Keep the explanation structured, use short sections or bullet points.

Selected code:

```%s
%s
```
